(self.webpackChunkanim8=self.webpackChunkanim8||[]).push([[274],{6656:t=>{t.exports=function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var h=n[s]={exports:{}};e[s][0].call(h.exports,(function(t){return i(e[s][1][t]||t)}),h,h.exports,t,e,n,r)}return n[s].exports}for(var o=void 0,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,a,c,h;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}if(s(n=this._events[t]))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(o(n))for(a=Array.prototype.slice.call(arguments,1),r=(h=n.slice()).length,c=0;c<r;c++)h[c].apply(this,a);return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){if(!i(e))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var n,r,s,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(s=(n=this._events[t]).length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(a=s;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}],2:[function(t,e,n){var r,i,o,s,a;a=navigator.userAgent.toLowerCase(),s=navigator.platform.toLowerCase(),o="ie"===(r=a.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0])[1]&&document.documentMode,(i={name:"version"===r[1]?r[3]:r[1],version:o||parseFloat("opera"===r[1]&&r[4]?r[4]:r[2]),platform:{name:a.match(/ip(?:ad|od|hone)/)?"ios":(a.match(/(?:webos|android)/)||s.match(/mac|win|linux/)||["other"])[0]}})[i.name]=!0,i[i.name+parseInt(i.version,10)]=!0,i.platform[i.platform.name]=!0,e.exports=i},{}],3:[function(t,e,n){var r,i,o,s={}.hasOwnProperty,a=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},c=[].slice;r=t("events").EventEmitter,o=t("./browser.coffee"),i=function(t){var e,n;function r(t){var n,r,i;for(r in this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(t),e)i=e[r],null==(n=this.options)[r]&&(n[r]=i)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(r,t),e={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},n={delay:500,copy:!1,dispose:-1},r.prototype.setOption=function(t,e){if(this.options[t]=e,null!=this._canvas&&("width"===t||"height"===t))return this._canvas[t]=e},r.prototype.setOptions=function(t){var e,n,r;for(e in n=[],t)s.call(t,e)&&(r=t[e],n.push(this.setOption(e,r)));return n},r.prototype.addFrame=function(t,e){var r,i;for(i in null==e&&(e={}),(r={}).transparent=this.options.transparent,n)r[i]=e[i]||n[i];if(null==this.options.width&&this.setOption("width",t.width),null==this.options.height&&this.setOption("height",t.height),"undefined"!=typeof ImageData&&null!==ImageData&&t instanceof ImageData)r.data=t.data;else if("undefined"!=typeof CanvasRenderingContext2D&&null!==CanvasRenderingContext2D&&t instanceof CanvasRenderingContext2D||"undefined"!=typeof WebGLRenderingContext&&null!==WebGLRenderingContext&&t instanceof WebGLRenderingContext)e.copy?r.data=this.getContextData(t):r.context=t;else{if(null==t.childNodes)throw new Error("Invalid image");e.copy?r.data=this.getImageData(t):r.image=t}return this.frames.push(r)},r.prototype.render=function(){var t,e,n;if(this.running)throw new Error("Already running");if(null==this.options.width||null==this.options.height)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=function(){var t,e,n;for(n=[],t=0,e=this.frames.length;0<=e?t<e:t>e;0<=e?++t:--t)n.push(null);return n}.call(this),e=this.spawnWorkers(),!0===this.options.globalPalette)this.renderNextFrame();else for(t=0,n=e;0<=n?t<n:t>n;0<=n?++t:--t)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},r.prototype.abort=function(){for(var t;null!=(t=this.activeWorkers.shift());)this.log("killing active worker"),t.terminate();return this.running=!1,this.emit("abort")},r.prototype.spawnWorkers=function(){var t,e,n,r;return t=Math.min(this.options.workers,this.frames.length),function(){n=[];for(var r=e=this.freeWorkers.length;e<=t?r<t:r>t;e<=t?r++:r--)n.push(r);return n}.apply(this).forEach((r=this,function(t){var e;return r.log("spawning worker "+t),(e=new Worker(r.options.workerScript)).onmessage=function(t){return r.activeWorkers.splice(r.activeWorkers.indexOf(e),1),r.freeWorkers.push(e),r.frameFinished(t.data)},r.freeWorkers.push(e)})),t},r.prototype.frameFinished=function(t){var e,n;if(this.log("frame "+t.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[t.index]=t,!0===this.options.globalPalette&&(this.options.globalPalette=t.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(e=1,n=this.freeWorkers.length;1<=n?e<n:e>n;1<=n?++e:--e)this.renderNextFrame();return a.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},r.prototype.finishRendering=function(){var t,e,n,r,i,o,s,a,c,h,u,f,l,p,v,g;for(a=0,i=0,c=(p=this.imageParts).length;i<c;i++)a+=((e=p[i]).data.length-1)*e.pageSize+e.cursor;for(a+=e.pageSize-e.cursor,this.log("rendering finished - filesize "+Math.round(a/1e3)+"kb"),t=new Uint8Array(a),f=0,o=0,h=(v=this.imageParts).length;o<h;o++)for(n=s=0,u=(g=(e=v[o]).data).length;s<u;n=++s)l=g[n],t.set(l,f),n===e.data.length-1?f+=e.cursor:f+=e.pageSize;return r=new Blob([t],{type:"image/gif"}),this.emit("finished",r,t)},r.prototype.renderNextFrame=function(){var t,e,n;if(0===this.freeWorkers.length)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return t=this.frames[this.nextFrame++],n=this.freeWorkers.shift(),e=this.getTask(t),this.log("starting frame "+(e.index+1)+" of "+this.frames.length),this.activeWorkers.push(n),n.postMessage(e)},r.prototype.getContextData=function(t){return t.getImageData(0,0,this.options.width,this.options.height).data},r.prototype.getImageData=function(t){var e;return null==this._canvas&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),(e=this._canvas.getContext("2d")).fillStyle=this.options.background,e.fillRect(0,0,this.options.width,this.options.height),e.drawImage(t,0,0),this.getContextData(e)},r.prototype.getTask=function(t){var e,n;if(n={index:e=this.frames.indexOf(t),last:e===this.frames.length-1,delay:t.delay,dispose:t.dispose,transparent:t.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:"chrome"===o.name},null!=t.data)n.data=t.data;else if(null!=t.context)n.data=this.getContextData(t.context);else{if(null==t.image)throw new Error("Invalid frame");n.data=this.getImageData(t.image)}return n},r.prototype.log=function(){var t;if(t=1<=arguments.length?c.call(arguments,0):[],this.options.debug)return console.log.apply(console,t)},r}(r),e.exports=i},{"./browser.coffee":2,events:1}]},{},[3])(3)},3274:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>X});var r=n(7294),i=n(4890),o=n(8048),s=n(9163),a=function(t){return{type:"ADD_PAGE",payload:t}},c=function(t){return{type:"SAVE_PAGE",payload:t}},h=function(t){return{type:"UPDATE_SCREEN",payload:t}},u=n(2897),f=n(7831);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(){var t,e,n=(t=["\n  background: black;\n  color: white;\n"],e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}})));return y=function(){return n},n}var w=(0,s.ZP)(u.zx)(y()),b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(a,t);var e,n,i,o,s=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=m(i);if(o){var n=m(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return d(this,t)});function a(){return p(this,a),s.apply(this,arguments)}return e=a,(n=[{key:"clearPage",value:function(){var t=this.props.targetCanvas.current.canvas;t.getContext("2d").clearRect(0,0,t.width,t.height)}},{key:"render",value:function(){var t=this;return r.createElement(w,{onClick:function(){return t.clearPage()},side:"inherit"},"clear page")}}])&&v(e.prototype,n),a}(r.Component);const _=(0,o.$j)((function(t){return{pages:t.pages}}),(function(t){return(0,i.DE)({savePage:c},t)}))(b);var k=n(6656),x=n.n(k);function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(t,e){return(E=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t,e){return!e||"object"!==P(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function S(){var t=I(["\n  background: cornsilk;\n  border: 2px solid black;\n  display: block;\n  margin-top: 0.5rem;\n  max-width: calc(100% - 4px);\n  padding: 1rem 0;\n"]);return S=function(){return t},t}function L(){var t=I(["\n  border: none;\n  box-shadow: ",";\n  display: block;\n  margin: 0 auto;\n  margin-bottom: ",";\n"]);return L=function(){return t},t}function j(){var t=I(["\n  background-color: deeppink;\n  margin: 0 auto;\n  display: block;\n\n  @media (min-width: 900px) {\n  }\n"]);return j=function(){return t},t}function D(){var t=I(["\n  margin-top: 4rem;\n\n  @media (min-width: 900px) {\n    float: right;\n    margin: 0;\n    margin-top: ",";\n    max-width: calc(50% - 0.5rem);\n    transition: margin-top 0.3s, height 0.3s;\n    width: 70rem;\n  }\n"]);return D=function(){return t},t}function I(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var T=s.ZP.div(D(),(function(t){return t.active?"0":t.topPos})),W=(0,s.ZP)(u.zx)(j()),z=s.ZP.img(L(),(function(t){return t.active?"1px 1px 2px 1px #00000017":""}),(function(t){return t.active?"0.5rem":"0"})),F=s.ZP.div(S());const M=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&E(t,e)}(a,t);var e,n,i,o,s=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=O(i);if(o){var n=O(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return R(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=s.call(this,t)).state={active:!1,windowTopPos:"-1.9rem",delay:300,needsRefresh:!1},e}return e=a,(n=[{key:"activate",value:function(){this.setState({active:!0,needsRefresh:!1})}},{key:"deactivate",value:function(){this.setState({active:!1})}},{key:"resetGif",value:function(){var t=this;this.gif=new(x())({background:"#fff",quality:1,workers:4,workerScript:"/gif.worker.js",width:this.props.width,height:this.props.height}),this.gif.on("finished",(function(e){t.customGif.src=URL.createObjectURL(e),t.customGif.onload=function(){t.activate()}}))}},{key:"createGif",value:function(){var t=this,e=[];this.resetGif(),this.gif.running=!1,this.props.pages.forEach((function(n){var r=new Image,i=new Promise((function(e){r.onload=function(){t.gif.addFrame(r,{delay:t.state.delay}),e()}}));e.push(i),r.src=n.canvasImg})),Promise.all(e).then((function(){return t.gif.render()}))}},{key:"handleUIChange",value:function(t){var e=t.currentTarget.value;this.setState({delay:e,needsRefresh:this.state.active})}},{key:"peak",value:function(){this.state.active||this.setState({windowTopPos:"0.8rem"})}},{key:"unPeak",value:function(){this.state.active||this.setState({windowTopPos:"-1.9rem"})}},{key:"dynamicHeight",value:function(){return this.state.active?Math.floor(this.props.height):0}},{key:"render",value:function(){var t=this,e=Math.floor(this.props.width)||0;return r.createElement(T,{active:this.state.active,topPos:this.state.windowTopPos,onMouseEnter:function(){return t.peak()},onMouseLeave:function(){return t.unPeak()}},r.createElement(z,{active:this.state.active,ref:function(e){return t.customGif=e},width:e,height:this.dynamicHeight()}),r.createElement(W,{active:this.state.active,onClick:function(){return t.createGif()}},this.state.needsRefresh?"recreate gif":"create gif"),r.createElement(F,null,r.createElement(u.__,null,"delay"),r.createElement(u.II,{type:"range",min:20,max:5e3,step:"100",onChange:function(e){return t.handleUIChange(e)},value:this.state.delay,width:"20rem"}),r.createElement("span",{style:{fontSize:"1.5rem"}},"".concat(this.state.delay/1e3,"s"))))}}])&&C(e.prototype,n),a}(r.Component);function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function N(t,e){return(N=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function U(t,e){return!e||"object"!==A(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Z(t){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function B(){var t=$(["\n  height: calc(100% - 30rem);\n  width: calc(20rem * 233.33%);\n\n  @media (min-width: 700px) {\n    height: calc(100% - 2rem);\n    width: calc(100% - 20rem);\n  }\n\n  @media (min-width: 900px) {\n    float: left;\n    max-width: calc(50% - 0.5rem);\n    width: 70rem;\n  }\n"]);return B=function(){return t},t}function q(){var t=$(["\n  overflow: hidden;\n  padding: 1rem;\n"]);return q=function(){return t},t}function H(){var t=$(["\n  margin: 0;\n  padding: 0;\n  text-align: center;\n  width: 100%;\n"]);return H=function(){return t},t}function $(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var V=s.ZP.div(H()),J=s.ZP.div(q()),K=s.ZP.div(B()),Q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&N(t,e)}(a,t);var e,n,i,o,s=(i=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Z(i);if(o){var n=Z(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return U(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=s.call(this,t)).state={page:1,canvasDims:{}},e.throttle=!1,e}return e=a,(n=[{key:"componentDidMount",value:function(){var t,e=this;this.canvasImg="",this.shadowImg="",this.canvasContainerRef=this.canvasContainer,t=this.canvasContainerRef.canvasContainerRef,this.canvasRef=this.canvasContainerRef.canvasRef,this.shadowCanvas=this.canvasContainerRef.shadowCanvas,this.setState({canvasDims:{height:t.getBoundingClientRect().height,width:t.getBoundingClientRect().width}}),window.addEventListener("resize",(function(t){return e.updateScreen(t)}))}},{key:"updateScreen",value:function(t){var e=this,n=this.canvasContainerRef.canvasContainerRef;this.throttle||(this.throttle=!0,setTimeout((function(){e.throttle=!1}),500),this.props.updateScreen({height:t.currentTarget.screen.availHeight,width:t.currentTarget.availWidth}),this.setState({canvasDims:{height:n.getBoundingClientRect().height,width:n.getBoundingClientRect().width}}))}},{key:"prevPage",value:function(){this.state.page>1&&(this.clearPage(),this.setState({page:this.state.page-1}))}},{key:"addPage",value:function(){this.props.addPage({canvasImg:this.canvasImg,id:this.state.page})}},{key:"nextPage",value:function(){this.canvasImg=this.canvasRef.current.canvas.toDataURL(),this.state.page-1===this.props.pages.length&&this.addPage(),this.savePage(),this.clearPage(),this.setState({page:this.state.page+1})}},{key:"savePage",value:function(){this.props.savePage({canvasImg:this.canvasImg,pageIndex:this.state.page-1})}},{key:"clearPage",value:function(){var t=this.canvasRef.current.canvas,e=this.shadowCanvas.canvas,n=t.getContext("2d"),r=e.getContext("2d");n.clearRect(0,0,t.width,t.height),r.clearRect(0,0,t.width,t.height)}},{key:"getCanvasImage",value:function(){if(this.props.pages.length&&!(this.state.page-1>=this.props.pages.length))return this.props.pages[this.state.page-1].canvasImg}},{key:"getShadowCanvasImage",value:function(){if(this.props.pages.length&&!(this.state.page-2<0))return this.props.pages[this.state.page-2].canvasImg}},{key:"render",value:function(){var t=this,e=this.getCanvasImage()||this.cavasImg||"",n=this.getShadowCanvasImage()||"";return r.createElement(J,null,r.createElement(u.xB,{backgroundColor:""}),r.createElement(K,null,r.createElement(f.Z,{ref:function(e){return t.canvasContainer=e},page:this.state.page,height:this.state.canvasDims.height,width:this.state.canvasDims.width,canvasImg:e,shadowImg:n,shadowCanvas:!0},r.createElement(V,null,r.createElement(u.zx,{onClick:function(){return t.prevPage()},side:"left",hoverColor:"white",hoverBackground:"black"},"prev"),r.createElement(_,{targetCanvas:this.canvasRef}),r.createElement(u.zx,{onClick:function(){return t.nextPage()},side:"right",hoverColor:"white",hoverBackground:"black"},"next")))),r.createElement(M,{height:1*this.state.canvasDims.height,width:1*this.state.canvasDims.width,store:this.props.store,pages:this.props.pages}))}}])&&G(e.prototype,n),a}(r.Component);const X=(0,o.$j)((function(t){return{pages:t.pages,screen:t.screen}}),(function(t){return(0,i.DE)({addPage:a,savePage:c,updateScreen:h},t)}))(Q)}}]);